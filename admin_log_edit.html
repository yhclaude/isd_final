<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="Description" Content="Learn more about programmatic technology, B2B advertising and campaign reporting.">
	<title>Open Lab</title>
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/bootstrap-table.css">
	<link href="css/style.css" rel="stylesheet">
	<link href="css/admin.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="https://jonthornton.github.io/jquery-timepicker/jquery.timepicker.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker.standalone.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://jonthornton.github.io/jquery-timepicker/jquery.timepicker.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.js"></script>
    <script src="js/datepair.js"></script>
    <script src="js/jquery.datepair.js"></script>
	
	<style type="text/css">
		#basicExample {
			margin-left: 60px;
		}
		#basicExample input {
			width: 82px;
			margin-left: 5px;
			height: 28px;
			padding: 6px;
			border-radius: 5px;
		}
	</style>
</head>
<body class="admin-body">
	<header class="header">
        <div class="head">
            <img class="logo" src="images/pitt-logo.png">
        </div>
    </header>
	<div class="upperRightButton">
		<button data-toggle="modal" data-target="#staffModal" type="button" class="btn btn-default">Update</button>
		<button data-toggle="modal" data-target="#staffModal" type="button" class="btn btn-default" onclick="switchMode()">Switch Mode</button>
	</div>
	    <div id="staffModal" class="modal fade" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content login-modal" style="background-color: black; opacity: 0.95;">
				<div class="modal-header-close" style="padding:3%">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close" style="font-size:24px; color: white;">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" style="padding: 5% 13%;">
					<form role="form">
						<div class="form-group">
							<label for="title" style="color: white;font-size: 22px;"><b>Hi, John!</b></label>
								<br /><br />
						</div>
						<div class="form-group">
							<label for="working hours" style="color:gray; font-size: 14px;">Working Hours</label>
								<br />
							<span style="padding-top:8%"><label style="color:white; font-size: 16px; float: left;">Hours</label>
							<p id="basicExample">
								    <input type="text" class="date start" />
								    <input type="text" class="time start" /> to
								    <input type="text" class="time end" />
								    <input type="text" class="date end" />
								</p>
								</span>
						</div>
						<br /><br />
						<div class="form-group">
							<span>
								<label for="working devices" style="color:gray; font-size: 14px;">Working Devices</label>
									<!-- <a href="#" style="color:white; font-size: 12px; float:right;"><u>Add</u></a> -->
							</span>
							<br />

							<span style="padding:8%"><label style="color:white; font-size: 16px; float: left;">Device</label>
								<select style="width: 75%">
										<option value="1">3D Printing</option>
										<option value="2">Virtual Reality</option>
										<option value="3">360° Video Camera & Viewer</option>
										<option value="4">360° Video Projector</option>
									</select>
							</span>
						</div>
							<br /><br />
						<div class="form-group">
							<label for="current event" style="color:gray; font-size: 14px;">Current Event</label>
							<div style="background: white; padding-top: 5px;padding-right: 15px;padding-bottom: 5px;padding-left: 15px;">
								<textarea class="form-control" rows="6" cols="80" name="current event" required></textarea>
							</div>
						</div>
						<div class="form-group">
							<div class="formButton" style="padding-top: 10px;padding-right: 120px;padding-bottom: 10px;padding-left: 120px;">
								<button type="button" class="btn btn-default" class="upperRightButton"style="color:white; background-color:#1c2957">Post</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<div class="admin-page container">
		<div class="admin-header">
			Content Management
		</div>
		<div class="row admin-content">
			<div class="col-md-3 left-navbar">
				<ul class="left-navbar-menu">
					<li><a href="admin_users.html" class="btn" role="button">Users</a></li>
					<li><a href="admin_events.html" class="btn" role="button">Events</a></li>
					<li><a href="admin_showcases.html" class="btn" role="button">Showcases</a></li>
					<li><a href="admin_subscribes.html" class="btn" role="button">Subscribes</a></li>
					<li><a href="admin_devices.html" class="btn" role="button">Devices</a></li>
					<li><a href="admin_log.html" class="btn active" role="button">Logs</a></li>

				</ul>
			</div>
			<div class="col-md-9 right-content">
				<div class="form-header">Edit logs</div>
				<form class="form-horizontal">
					<div class="form-group">
						<label for="inputUsername" class="col-sm-3 control-label">User Name</label>
						<div class="col-sm-9">
							<input type="text" class="form-control" id="inputUsername" placeholder="User Name" name="user_name">
						</div>
					</div>
					<div class="form-group">
						<label for="inputWorkingMachine" class="col-sm-3 control-label">Working Machine</label>
						<div class="col-sm-9">
							<input type="text" class="form-control" id="inputWorkingMachine" placeholder="Working Machine" name="working_machine">
						</div>
					</div>
					<div class="form-group">
						<label for="inputStartTime" class="col-sm-3 control-label">Start Time</label>
						<div class="col-sm-9">
							<input type="datetime-local" name="start_time" class="form-control" id="inputStartTime" placeholder="Start Time">
						</div>
					</div>
					<div class="form-group">
						<label for="inputEndTime" class="col-sm-3 control-label">End Time</label>
						<div class="col-sm-9">
							<input type="datetime-local" name="end_time" class="form-control" id="inputEndTime" placeholder="End Time">
						</div>
					</div>
					<div style="display: none">
						<input name="sess" value="fwesdvge">
					</div>
					<div class="form-group">
						<div class="col-sm-offset-3 col-sm-9">
							<button id="submit" type="button" class="btn btn-primary" style="background-color: #1c2957;">Confirm</button>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div id="footer">
			<div class="row">
				<hr>
			</div>
			<div class="row col-8">
				<div class="col-8 col-offset-2 col-md-8 col-md-offset-2">

					<div class="col-sm-8 col-xs-8">
						<p><span data-feather="map-pin" style="width:14px; height:14px;"></span> 227 Fifth Avenue, Pittsburgh, PA 15260</p>
						<p><span data-feather="phone" style="width:14px; height:14px;"></span> 412-624-3335</p>
						<p><span data-feather="inbox" style="width:14px; height:14px;"></span> Email: teaching@pitt.edu</p>
					</div>

					<div class="col" id="login-button">
					</div>

				</div>
			</div>
		</div>
	</div>

<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-table.min.js"></script>
<script src="js/bootstrap-table-en-US.js"></script>
<script src="js/switchMode.js"></script>
<script src="js/user.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('#basicExample .time').timepicker({
	        'showDuration': true,
	        'timeFormat': 'g:ia'
	    });

	    $('#basicExample .date').datepicker({
	        'format': 'm/d/yyyy',
	        'autoclose': true
	    });

	    // initialize datepair
	    var basicExampleEl = document.getElementById('basicExample');
	    var datepair = new Datepair(basicExampleEl);
		function getQueryString(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
			var r = window.location.search.substr(1).match(reg);
			if (r != null) {
				return unescape(r[2]);
			}
			return null;
		}
		var user_id = getQueryString("id");

		var url = 'https://api.airtable.com/v0/app1dnIEPdyN4RDwi/logs/'+ user_id +'?api_key=keyHGiTKOgoyrrrm0';

		$.ajax({
			url: url,
			type: 'GET',
			data: null,
			dataType:'json',
			success: function(res) {
				if(res.fields) {
					document.getElementById('inputUsername').value = res.fields.user_name;
					document.getElementById('inputWorkingMachine').value = res.fields.working_machine;
					document.getElementById('inputStartTime').value = res.fields.start_time;
					document.getElementById('inputEndTime').value = res.fields.end_time;
				} else {
					alert('Edit failed!');
				}
			}
		})

		$('#submit').click(function() {
			var getParams = {
				"fields": {
					user_name: $("input[name='user_name']").val(),
					working_machine: $("input[name='working_machine']").val(),
					start_time: $("input[name='start_time']").val(),
					end_time: $("input[name='end_time']").val()
				}
			}
			$.ajax({
				url: url,
				type: 'put',
				data: getParams,
				dataType:'json',
				success: function(res) {
					if(res.fields) {
						alert('Edit successfully!');
						location.href = "http://localhost/isd_final/admin_log.html"
					} else {
						alert('Edit failed!');
					}
				}
			})
		})
	})
	User.renderBtn();
</script>

</body>
<!-- Icons -->
<script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
<script>
  feather.replace()
</script>
</html>
